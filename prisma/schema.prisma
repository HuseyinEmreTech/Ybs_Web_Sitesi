generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url = env("POSTGRES_PRISMA_URL") // uses connection pooling
  directUrl = env("POSTGRES_URL_NON_POOLING") // uses a direct connection
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String
  imageUrl  String?
  role      String   @default("editor") // 'admin' | 'editor'
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Post {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  excerpt     String
  content     String
  category    String
  imageUrl    String?
  publishedAt DateTime
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Event {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  description String
  content     String
  eventType   String
  date        DateTime
  time        String
  location    String
  imageUrl    String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model TeamMember {
  id          String   @id @default(cuid())
  name        String
  role        String
  department  String
  bio         String
  imageUrl    String?
  socialLinks Json     // Stores { linkedin, twitter, github, instagram }
  order       Int      @default(0)
  projects    Project[]
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Settings {
  id              String   @id @default("default") // Singleton pattern
  siteName        String   @default("YBS Kulübü")
  description     String   @default("")
  contact         Json     // Stores { email, phone, address }
  socialMedia     Json     // Stores { instagram, twitter, linkedin, github }
  maintenanceMode Boolean  @default(false)
  updatedAt       DateTime @updatedAt
  // Removed 'stats' as it's not in the main settings interface currently, 
  // or logic can be adapted if needed.
}

model OrganizationChart {
  id        String   @id @default("default") // Singleton pattern
  nodes     Json     // Stores OrganizationNode[]
  updatedAt DateTime @updatedAt
}

model Project {
  id           String   @id @default(cuid())
  title        String
  slug         String   @unique
  description  String
  content      String
  image        String?  // Changed from imageUrl to image to match Sanity or keep consistent? Let's use image to be simple, or imageUrl to match others. The plan said Image URL. Let's stick to 'imageUrl' for consistency with other models, but the public page used 'image' object from Sanity. I will use 'imageUrl' here and map it later.
  imageUrl     String?
  technologies String[]
  status       String   // 'devam', 'tamamlandi', 'planlaniyor'
  year         String?
  githubUrl    String?
  liveUrl      String?
  teamMembers  TeamMember[]
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
